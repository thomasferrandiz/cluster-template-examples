# cluster specific values
cluster:
  # specify cluster name
  name: template-rke2

  # specify cluster labels
  labels: {}

  # specify cluster annotations
  annotations: {}

cloudprovider: openstack

#Create a secret with this name in the namespace where you deploy the chart
cloudCredentialSecretName: engcloud

cloudinit:
  enable: true
  runcmd:
  - mkdir -p /var/lib/rancher/rke2/server/manifests
  - | 
    cat > /var/lib/rancher/rke2/server/manifests/rke2-os-ccm-config.yaml <<EOF
    apiVersion: helm.cattle.io/v1
    kind: HelmChart
    metadata:
      name: openstack-cloud-controller-manager
      namespace: kube-system
    spec:
      bootstrap: true
      repo: https://kubernetes.github.io/cloud-provider-openstack
      version: "2.27.1"
      targetNamespace: kube-system
    EOF

kubernetesVersion: "v1.25.10+rke2r1"

openstack:
  authUrl: https://engcloud.prv.suse.net:5000/v3
  domainName: ldap_users
  region: CustomRegion
  tenantId: 05394ae447d74bc0b3ed2cca262c9b7c
  username: tferrandiz


  
# Specify nodepool options. Can add multiple node groups, specify etcd, controlplane and worker roles.
nodepools:
- etcd: true
  controlplane: true
  worker: true

  # specify node labels
  labels: {}

  # specify node taints
  taints: {}

  # specify nodepool size
  quantity: 1

  # Pause node pool
  paused: false

  # specify displayName
  # displayName: ""

  # specify rolling update mechanism
  # rollingUpdate:
  #   The maximum number of machines that can be unavailable during the update.
  #   Value can be an absolute number (ex: 5) or a percentage of desired
  #   machines (ex: 10%).
  #   Absolute number is calculated from percentage by rounding down.
  #   This can not be 0 if MaxSurge is 0.
  #   Defaults to 0.
  #   Example: when this is set to 30%, the old MachineSet can be scaled
  #   down to 70% of desired machines immediately when the rolling update
  #   starts. Once new machines are ready, old MachineSet can be scaled
  #   down further, followed by scaling up the new MachineSet, ensuring
  #   that the total number of machines available at all times
  #   during the update is at least 70% of desired machines.
  #   maxUnavailable: "5"
  #   The maximum number of machines that can be scheduled above the
  #   desired number of machines.
  #   Value can be an absolute number (ex: 5) or a percentage of
  #   desired machines (ex: 10%).
  #   This can not be 0 if MaxUnavailable is 0.
  #   Absolute number is calculated from percentage by rounding up.
  #   Defaults to 1.
  #   Example: when this is set to 30%, the new MachineSet can be scaled
  #   up immediately when the rolling update starts, such that the total
  #   number of old and new machines do not exceed 130% of desired
  #   machines. Once old machines have been killed, new MachineSet can
  #   be scaled up further, ensuring that total number of machines running
  #   at any time during the update is at most 130% of desired machines.
  #   maxSurge: "1"

  # specify machineDeployment Labels
  # machineDeploymentLabels: {}

  # specify machineDeployment annotations
  # machineDeploymentAnnotations: {}

  # specify nodepool name
  name: os-nodepool-2
  flavorName: m2.medium
  floatingipPool: floating
  imageName: ubuntu-20.04-focal-server-cloudimg
  netId: 8f6b659b-14b4-48b3-9c61-9c7bafabc04c
  # cacert_name: Suse_Root.crt
  insecure: true

